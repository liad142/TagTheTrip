{"ast":null,"code":"var _jsxFileName = \"/home/liad/WebstormProjects/theTheTrip/frontend/src/App.js\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport ReactMapGL, { Marker, Popup } from 'react-map-gl';\nimport { Room, Star } from \"@material-ui/icons\";\nimport './app.css';\nimport axios from \"axios\";\nimport { format } from \"timeago.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const currentUser = 'LAMA';\n  const [pins, setPins] = useState([]);\n  const [currentPlaceId, setCurrentPlaceId] = useState(null);\n  const [newPlace, setNewPlace] = useState(null);\n  const [title, setTitle] = useState(null);\n  const [desc, setDesc] = useState(null);\n  const [rating, setRating] = useState(0);\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '100vh',\n    latitude: 46,\n    longitude: 17,\n    zoom: 4\n  });\n  useEffect(() => {\n    const getPins = async () => {\n      try {\n        const res = await axios.get(\"/pins\");\n        setPins(res.data);\n      } catch (err) {\n        console.log(err, 'err in useEffect getting pins');\n      }\n    };\n\n    getPins();\n  }, []);\n\n  const handleMarkerClick = (id, lat, long) => {\n    setCurrentPlaceId(id);\n    setViewport({ ...viewport,\n      latitude: lat,\n      longitude: long\n    }); //מביאים את כל הVIEWPORT אבל משנה את הLAT ו LONG\n  };\n\n  const handleAddClick = e => {\n    const [long, lat] = e.lngLat;\n    setNewPlace({\n      lat,\n      long\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const newPin = {\n      username: currentUser,\n      title,\n      desc,\n      rating,\n      lat: newPlace.lat,\n      long: newPlace.long\n    };\n\n    try {\n      const res = await axios.post('/pins', newPin);\n      setPins([...pins, res.data]);\n      setNewPlace(null);\n    } catch (err) {\n      console.log(err, 'error on sending new pin to back end');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(ReactMapGL, { ...viewport,\n      //מחזיק את כל המאפיינים\n      mapboxApiAccessToken: process.env.REACT_APP_MAPBOX,\n      onViewportChange: nextViewport => setViewport(nextViewport),\n      mapStyle: \"mapbox://styles/safak/cknndpyfq268f17p53nmpwira\",\n      onDblClick: handleAddClick,\n      transitionDuration: '200',\n      children: [pins.map(pin => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Marker, {\n          latitude: pin.lat,\n          longitude: pin.long,\n          offsetLeft: viewport.zoom * 7,\n          offsetTop: viewport.zoom * 3.5,\n          children: /*#__PURE__*/_jsxDEV(Room, {\n            style: {\n              fontSize: viewport.zoom * 7,\n              color: pin.username === currentUser ? 'red' : 'blue',\n              cursor: 'pointer'\n            },\n            onClick: () => handleMarkerClick(pin._id, pin.lat, pin.long)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }, this), pin._id === currentPlaceId && /*#__PURE__*/_jsxDEV(Popup, {\n          latitude: pin.lat,\n          longitude: pin.long,\n          closeButton: true,\n          closeOnClick: false,\n          anchor: \"top\",\n          onClose: () => setCurrentPlaceId(null),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: 'card',\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Place\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: 'place',\n              children: pin.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: 'desc',\n              children: pin.desc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Rating\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: 'stars',\n              children: Array(pin.rating).fill( /*#__PURE__*/_jsxDEV(Star, {\n                className: 'star'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 65\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Info\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: 'username',\n              children: [\"Created By \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: pin.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 77\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: 'date',\n              children: format(pin.createdAt)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true)), newPlace && /*#__PURE__*/_jsxDEV(Popup, {\n        latitude: newPlace.lat,\n        longitude: newPlace.long,\n        closeButton: true,\n        closeOnClick: false,\n        anchor: \"top\",\n        onClose: () => setNewPlace(null),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: 'Enter a title',\n              onChange: e => setTitle(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              placeholder: 'Write a quick review ',\n              onChange: e => setDesc(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Rating\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              onChange: e => setRating(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"1\",\n                children: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"2\",\n                children: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"3\",\n                children: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"4\",\n                children: \"4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"5\",\n                children: \"5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: 'submitButton',\n              type: 'submit',\n              children: \"Add Pin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), currentUser ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'button logout',\n        children: \"Log Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 22\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'buttons',\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'button login',\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'button register',\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"T/ZSDc+A32qNesq+0OYqrLXdLhM=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/liad/WebstormProjects/theTheTrip/frontend/src/App.js"],"names":["React","useEffect","useState","ReactMapGL","Marker","Popup","Room","Star","axios","format","App","currentUser","pins","setPins","currentPlaceId","setCurrentPlaceId","newPlace","setNewPlace","title","setTitle","desc","setDesc","rating","setRating","viewport","setViewport","width","height","latitude","longitude","zoom","getPins","res","get","data","err","console","log","handleMarkerClick","id","lat","long","handleAddClick","e","lngLat","handleSubmit","preventDefault","newPin","username","post","process","env","REACT_APP_MAPBOX","nextViewport","map","pin","fontSize","color","cursor","_id","Array","fill","createdAt","target","value"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {useEffect, useState} from 'react';\nimport ReactMapGL, {Marker, Popup} from 'react-map-gl';\nimport {Room, Star} from \"@material-ui/icons\";\nimport './app.css'\nimport axios from \"axios\";\nimport {format} from \"timeago.js\";\n\n\nfunction App() {\n    const currentUser = 'LAMA'\n    const [pins, setPins] = useState([])\n    const [currentPlaceId, setCurrentPlaceId] = useState(null)\n    const [newPlace, setNewPlace] = useState(null)\n    const [title, setTitle] = useState(null)\n    const [desc, setDesc] = useState(null)\n    const [rating, setRating] = useState(0)\n    const [viewport, setViewport] = useState({\n        width: '100vw',\n        height: '100vh',\n        latitude: 46,\n        longitude: 17,\n        zoom: 4\n    });\n\n    useEffect(() => {\n        const getPins = async () => {\n            try {\n                const res = await axios.get(\"/pins\");\n                setPins(res.data);\n            } catch (err) {\n                console.log(err, 'err in useEffect getting pins')\n            }\n        }\n        getPins()\n    }, [])\n    const handleMarkerClick = (id, lat, long) => {\n        setCurrentPlaceId(id)\n        setViewport({...viewport, latitude: lat, longitude: long}) //מביאים את כל הVIEWPORT אבל משנה את הLAT ו LONG\n    }\n    const handleAddClick = (e) => {\n        const [long, lat] = e.lngLat;\n        setNewPlace({\n            lat, long\n        })\n    }\n    const handleSubmit = async (e) => {\n        e.preventDefault()\n        const newPin = {\n            username: currentUser,\n            title,\n            desc,\n            rating,\n            lat: newPlace.lat,\n            long: newPlace.long\n        }\n        try {\n            const res = await axios.post('/pins', newPin);\n            setPins([...pins, res.data])\n            setNewPlace(null)\n        } catch (err) {\n            console.log(err, 'error on sending new pin to back end')\n        }\n    }\n\n    return (\n        <div className=\"App\">\n            <ReactMapGL\n                {...viewport} //מחזיק את כל המאפיינים\n                mapboxApiAccessToken={process.env.REACT_APP_MAPBOX}\n                onViewportChange={nextViewport => setViewport(nextViewport)}\n                mapStyle=\"mapbox://styles/safak/cknndpyfq268f17p53nmpwira\"\n                onDblClick={handleAddClick}\n                transitionDuration={'200'}\n            >\n                {pins.map(pin => (\n                    <>\n                        <Marker latitude={pin.lat} longitude={pin.long} offsetLeft={viewport.zoom * 7}\n                                offsetTop={viewport.zoom * 3.5}>\n                            <Room\n                                style={{\n                                    fontSize: viewport.zoom * 7,\n                                    color: pin.username === currentUser ? 'red' : 'blue',\n                                    cursor: 'pointer'\n                                }}\n                                onClick={() => handleMarkerClick(pin._id, pin.lat, pin.long)}\n                            />\n\n                        </Marker>\n                        {pin._id === currentPlaceId && (\n                            <Popup\n                                latitude={pin.lat}\n                                longitude={pin.long}\n                                closeButton={true}\n                                closeOnClick={false}\n                                anchor=\"top\"\n                                onClose={() => setCurrentPlaceId(null)}\n                            >\n                                <div className={'card'}>\n                                    <label>Place</label>\n                                    <h4 className={'place'}>{pin.title}</h4>\n                                    <label>Review</label>\n                                    <p className={'desc'}>{pin.desc}</p>\n                                    <label>Rating</label>\n                                    <div className={'stars'}>\n                                        {/*לוקח את המספר וממלא אותו עם הקומפוננטה לפי מס' הכוכבים*/}\n                                        {Array(pin.rating).fill(<Star className={'star'}/>)}\n                                    </div>\n                                    <label>Info</label>\n                                    <span className={'username'}>Created By <b>{pin.username}</b></span>\n                                    <span className={'date'}>{format(pin.createdAt)}</span>\n                                </div>\n                            </Popup>\n                        )}\n                    </>\n                ))}\n\n                {newPlace &&\n                <Popup\n                    latitude={newPlace.lat}\n                    longitude={newPlace.long}\n                    closeButton={true}\n                    closeOnClick={false}\n                    anchor=\"top\"\n                    onClose={() => setNewPlace(null)}\n                >\n                    <div>\n                        <form onSubmit={handleSubmit}>\n                            <label>Title</label>\n                            <input placeholder={'Enter a title'}\n                                   onChange={(e) => setTitle(e.target.value)}/>\n                            <label>Review</label>\n                            <textarea placeholder={'Write a quick review '}\n                                      onChange={(e) => setDesc(e.target.value)}/>\n                            <label>Rating</label>\n                            <select onChange={(e) => setRating(e.target.value)}>\n                                <option value=\"1\">1</option>\n                                <option value=\"2\">2</option>\n                                <option value=\"3\">3</option>\n                                <option value=\"4\">4</option>\n                                <option value=\"5\">5</option>\n                            </select>\n                            <button className={'submitButton'} type={'submit'}>Add Pin</button>\n                        </form>\n\n                    </div>\n\n                </Popup>\n                }\n                {/*אם יש משתמש תראה את כפתור הלוגין,ואם לא מראה את כפתור ההתחברות והרשמה*/}\n                {currentUser ?\n                    (<button className={'button logout'}>Log Out</button>)\n                    : (\n                        <div className={'buttons'}>\n                            <button className={'button login'}>Login</button>\n                            <button className={'button register'}>Register</button>\n                        </div>\n                    )}\n\n            </ReactMapGL>\n        </div>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}