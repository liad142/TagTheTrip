{"ast":null,"code":"var _jsxFileName = \"/home/liad/WebstormProjects/theTheTrip/frontend/src/App.js\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport ReactMapGL, { Marker, Popup } from 'react-map-gl';\nimport { Room, Star } from \"@material-ui/icons\";\nimport './app.css';\nimport axios from \"axios\";\nimport { format } from \"timeago.js\";\nimport Register from \"./components/Register\";\nimport Login from \"./components/Login\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const myStorage = window.localStorage;\n  const [currentUser, setCurrentUser] = useState(null);\n  const [pins, setPins] = useState([]);\n  const [currentPlaceId, setCurrentPlaceId] = useState(null);\n  const [newPlace, setNewPlace] = useState(null);\n  const [title, setTitle] = useState(null);\n  const [desc, setDesc] = useState(null);\n  const [rating, setRating] = useState(0);\n  const [showRegister, setShowRegister] = useState(false);\n  const [showLogin, setShowLogin] = useState(false);\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '100vh',\n    latitude: 46,\n    longitude: 17,\n    zoom: 4\n  });\n  useEffect(() => {\n    const getPins = async () => {\n      try {\n        const res = await axios.get(\"/pins\");\n        setPins(res.data);\n      } catch (err) {\n        console.log(err, 'err in useEffect getting pins');\n      }\n    };\n\n    getPins();\n  }, []);\n\n  const handleMarkerClick = (id, lat, long) => {\n    setCurrentPlaceId(id);\n    setViewport({ ...viewport,\n      latitude: lat,\n      longitude: long\n    }); //מביאים את כל הVIEWPORT אבל משנה את הLAT ו LONG\n  };\n\n  const handleAddClick = e => {\n    const [long, lat] = e.lngLat;\n    setNewPlace({\n      lat,\n      long\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const newPin = {\n      username: currentUser,\n      title,\n      desc,\n      rating,\n      lat: newPlace.lat,\n      long: newPlace.long\n    };\n\n    try {\n      const res = await axios.post('/pins', newPin);\n      setPins([...pins, res.data]);\n      setNewPlace(null);\n    } catch (err) {\n      console.log(err, 'error on sending new pin to back end');\n    }\n  };\n\n  const handleLogOut = () => {\n    myStorage.removeItem('user');\n    currentUser(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(ReactMapGL, { ...viewport,\n      //מחזיק את כל המאפיינים\n      mapboxApiAccessToken: process.env.REACT_APP_MAPBOX,\n      onViewportChange: nextViewport => setViewport(nextViewport),\n      mapStyle: \"mapbox://styles/safak/cknndpyfq268f17p53nmpwira\",\n      onDblClick: handleAddClick,\n      transitionDuration: '200',\n      children: [pins.map(pin => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Marker, {\n          latitude: pin.lat,\n          longitude: pin.long,\n          offsetLeft: viewport.zoom * 7,\n          offsetTop: viewport.zoom * 3.5,\n          children: /*#__PURE__*/_jsxDEV(Room, {\n            style: {\n              fontSize: viewport.zoom * 7,\n              color: pin.username === currentUser ? 'red' : 'blue',\n              cursor: 'pointer'\n            },\n            onClick: () => handleMarkerClick(pin._id, pin.lat, pin.long)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this), pin._id === currentPlaceId && /*#__PURE__*/_jsxDEV(Popup, {\n          latitude: pin.lat,\n          longitude: pin.long,\n          closeButton: true,\n          closeOnClick: false,\n          anchor: \"top\",\n          onClose: () => setCurrentPlaceId(null),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: 'card',\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Place\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: 'place',\n              children: pin.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: 'desc',\n              children: pin.desc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Rating\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: 'stars',\n              children: Array(pin.rating).fill( /*#__PURE__*/_jsxDEV(Star, {\n                className: 'star'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 65\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Info\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: 'username',\n              children: [\"Created By \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: pin.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 77\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: 'date',\n              children: format(pin.createdAt)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true)), newPlace && /*#__PURE__*/_jsxDEV(Popup, {\n        latitude: newPlace.lat,\n        longitude: newPlace.long,\n        closeButton: true,\n        closeOnClick: false,\n        anchor: \"top\",\n        onClose: () => setNewPlace(null),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: 'Enter a title',\n              onChange: e => setTitle(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              placeholder: 'Write a quick review ',\n              onChange: e => setDesc(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Rating\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              onChange: e => setRating(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"1\",\n                children: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"2\",\n                children: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"3\",\n                children: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"4\",\n                children: \"4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"5\",\n                children: \"5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: 'submitButton',\n              type: 'submit',\n              children: \"Add Pin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), currentUser ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'button logout',\n        onClick: handleLogOut,\n        children: \"Log Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 22\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'buttons',\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'button login',\n          onClick: () => setShowLogin(true),\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'button register',\n          onClick: () => setShowRegister(true),\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 25\n      }, this), showRegister && /*#__PURE__*/_jsxDEV(Register, {\n        setShowRegister: setShowRegister\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 33\n      }, this), showLogin && /*#__PURE__*/_jsxDEV(Login, {\n        setShowLogin: setShowLogin,\n        myStorage: myStorage,\n        setCurrentUser: setCurrentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 30\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"/chVwEFguTHB5Exo9izjx66/EpE=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/liad/WebstormProjects/theTheTrip/frontend/src/App.js"],"names":["React","useEffect","useState","ReactMapGL","Marker","Popup","Room","Star","axios","format","Register","Login","App","myStorage","window","localStorage","currentUser","setCurrentUser","pins","setPins","currentPlaceId","setCurrentPlaceId","newPlace","setNewPlace","title","setTitle","desc","setDesc","rating","setRating","showRegister","setShowRegister","showLogin","setShowLogin","viewport","setViewport","width","height","latitude","longitude","zoom","getPins","res","get","data","err","console","log","handleMarkerClick","id","lat","long","handleAddClick","e","lngLat","handleSubmit","preventDefault","newPin","username","post","handleLogOut","removeItem","process","env","REACT_APP_MAPBOX","nextViewport","map","pin","fontSize","color","cursor","_id","Array","fill","createdAt","target","value"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {useEffect, useState} from 'react';\nimport ReactMapGL, {Marker, Popup} from 'react-map-gl';\nimport {Room, Star} from \"@material-ui/icons\";\nimport './app.css'\nimport axios from \"axios\";\nimport {format} from \"timeago.js\";\nimport Register from \"./components/Register\";\nimport Login from \"./components/Login\";\n\n\nfunction App() {\n    const myStorage = window.localStorage\n    const [currentUser, setCurrentUser] = useState(null)\n    const [pins, setPins] = useState([])\n    const [currentPlaceId, setCurrentPlaceId] = useState(null)\n    const [newPlace, setNewPlace] = useState(null)\n    const [title, setTitle] = useState(null)\n    const [desc, setDesc] = useState(null)\n    const [rating, setRating] = useState(0)\n    const [showRegister,setShowRegister] = useState(false)\n    const [showLogin,setShowLogin] = useState(false)\n    const [viewport, setViewport] = useState({\n        width: '100vw',\n        height: '100vh',\n        latitude: 46,\n        longitude: 17,\n        zoom: 4\n    });\n\n    useEffect(() => {\n        const getPins = async () => {\n            try {\n                const res = await axios.get(\"/pins\");\n                setPins(res.data);\n            } catch (err) {\n                console.log(err, 'err in useEffect getting pins')\n            }\n        }\n        getPins()\n    }, [])\n    const handleMarkerClick = (id, lat, long) => {\n        setCurrentPlaceId(id)\n        setViewport({...viewport, latitude: lat, longitude: long}) //מביאים את כל הVIEWPORT אבל משנה את הLAT ו LONG\n    }\n    const handleAddClick = (e) => {\n        const [long, lat] = e.lngLat;\n        setNewPlace({\n            lat, long\n        })\n    }\n    const handleSubmit = async (e) => {\n        e.preventDefault()\n        const newPin = {\n            username: currentUser,\n            title,\n            desc,\n            rating,\n            lat: newPlace.lat,\n            long: newPlace.long\n        }\n        try {\n            const res = await axios.post('/pins', newPin);\n            setPins([...pins, res.data])\n            setNewPlace(null)\n        } catch (err) {\n            console.log(err, 'error on sending new pin to back end')\n        }\n    }\n    \n    const handleLogOut = () =>{\n        myStorage.removeItem('user')\n        currentUser(null)\n    }\n\n    return (\n        <div className=\"App\">\n            <ReactMapGL\n                {...viewport} //מחזיק את כל המאפיינים\n                mapboxApiAccessToken={process.env.REACT_APP_MAPBOX}\n                onViewportChange={nextViewport => setViewport(nextViewport)}\n                mapStyle=\"mapbox://styles/safak/cknndpyfq268f17p53nmpwira\"\n                onDblClick={handleAddClick}\n                transitionDuration={'200'}\n            >\n                {pins.map(pin => (\n                    <>\n                        <Marker latitude={pin.lat} longitude={pin.long} offsetLeft={viewport.zoom * 7}\n                                offsetTop={viewport.zoom * 3.5}>\n                            <Room\n                                style={{\n                                    fontSize: viewport.zoom * 7,\n                                    color: pin.username === currentUser ? 'red' : 'blue',\n                                    cursor: 'pointer'\n                                }}\n                                onClick={() => handleMarkerClick(pin._id, pin.lat, pin.long)}\n                            />\n\n                        </Marker>\n                        {pin._id === currentPlaceId && (\n                            <Popup\n                                latitude={pin.lat}\n                                longitude={pin.long}\n                                closeButton={true}\n                                closeOnClick={false}\n                                anchor=\"top\"\n                                onClose={() => setCurrentPlaceId(null)}\n                            >\n                                <div className={'card'}>\n                                    <label>Place</label>\n                                    <h4 className={'place'}>{pin.title}</h4>\n                                    <label>Review</label>\n                                    <p className={'desc'}>{pin.desc}</p>\n                                    <label>Rating</label>\n                                    <div className={'stars'}>\n                                        {/*לוקח את המספר וממלא אותו עם הקומפוננטה לפי מס' הכוכבים*/}\n                                        {Array(pin.rating).fill(<Star className={'star'}/>)}\n                                    </div>\n                                    <label>Info</label>\n                                    <span className={'username'}>Created By <b>{pin.username}</b></span>\n                                    <span className={'date'}>{format(pin.createdAt)}</span>\n                                </div>\n                            </Popup>\n                        )}\n                    </>\n                ))}\n\n                {newPlace &&\n                <Popup\n                    latitude={newPlace.lat}\n                    longitude={newPlace.long}\n                    closeButton={true}\n                    closeOnClick={false}\n                    anchor=\"top\"\n                    onClose={() => setNewPlace(null)}\n                >\n                    <div>\n                        <form onSubmit={handleSubmit}>\n                            <label>Title</label>\n                            <input placeholder={'Enter a title'}\n                                   onChange={(e) => setTitle(e.target.value)}/>\n                            <label>Review</label>\n                            <textarea placeholder={'Write a quick review '}\n                                      onChange={(e) => setDesc(e.target.value)}/>\n                            <label>Rating</label>\n                            <select onChange={(e) => setRating(e.target.value)}>\n                                <option value=\"1\">1</option>\n                                <option value=\"2\">2</option>\n                                <option value=\"3\">3</option>\n                                <option value=\"4\">4</option>\n                                <option value=\"5\">5</option>\n                            </select>\n                            <button className={'submitButton'} type={'submit'}>Add Pin</button>\n                        </form>\n\n                    </div>\n\n                </Popup>\n                }\n                {/*אם יש משתמש תראה את כפתור הלוגין,ואם לא מראה את כפתור ההתחברות והרשמה*/}\n                {currentUser ?\n                    (<button className={'button logout'} onClick={handleLogOut}>Log Out</button>)\n                    : (\n                        <div className={'buttons'}>\n                            <button className={'button login'} onClick={()=>setShowLogin(true)}>Login</button>\n                            <button className={'button register'} onClick={()=>setShowRegister(true)}>Register</button>\n                        </div>\n                    )}\n                {/*&& if its true show register componenet*/}\n                {showRegister&& <Register setShowRegister={setShowRegister}/>}\n\n                {/*&& if its true show login componenet*/}\n                {showLogin&& <Login setShowLogin={setShowLogin} myStorage={myStorage} setCurrentUser={setCurrentUser}/>}\n\n            </ReactMapGL>\n        </div>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}